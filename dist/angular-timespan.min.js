/*! angular-timespan 0.0.1 29-04-2015 */
angular.module("aurbano.timespan",[]).value("config",{lessThanFirst:"now",millisecond:"millisecond",second:"second",minute:"minute",hour:"hour",day:"day",week:"week",month:"month",year:"year",now:"now",space:!0,pluralize:!0}).directive("timespan",["config",function(a){"use strict";return{restrict:"A",scope:{timespan:"=",timespanOpts:"="},template:'<acronym title="{{parsedDays}} days">{{parsedTimestamp}}</acronym>',controller:["$scope",function(b,c){angular.extend(a,b.timespanOpts);var d=1,e=1e3*d,f=60*e,g=60*f,h=24*g,i=7*h,j=30*h,k=365*h,l=[];l=[[d,a.millisecond],[e,a.second],[f,a.minute],[g,a.hour],[h,a.day],[i,a.week],[j,a.month],[k,a.year]],b.parse=function(b){for(var c="",d=" ",e=Math.round(b/l[l.length-1][0]),f=l[l.length-1][1],g=0;!l[g][1];)g++;if(b<l[g][0])return a.lessThanFirst;for(var h=1;h<l.length;h++)if(l[h-1][1]&&l[h-1][0]<=b&&b<l[h][0]){e=Math.round(b/l[h-1][0]),f=l[h-1][1];break}return e>1&&a.pluralize&&(c="s"),a.space||(d=""),e+d+f+c},b.$watch("timespan",function(){b.parsedDays=Math.ceil(b.timespan/h),b.parsedTimestamp=b.parse(b.timespan)})}]}}]);